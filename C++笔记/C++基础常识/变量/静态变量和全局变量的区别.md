### 全局变量 (Global Variables)

- **定义：** ==在任何函数、类或代码块之外定义的变量。==
    
- **作用域：**
    
    - **文件作用域：** ==它们在定义它们的文件（编译单元）的任何位置都可见。==
        
    - **全局作用域：** 默认情况下，全局变量具有**外部链接 (external linkage)**。这意味着它们可以在程序的**==所有文件（编译单元）**中被访问和修改，只要在其他文件中通过 `extern` 关键字声明即可。==
    
	- - **存储期：** ==具有**静态存储期**。这意味着它们在程序启动时被创建和初始化，并在程序结束时被销毁。==
    
	- **初始化：** 如果没有显式初始化，全局变量会被**零初始化**（数值类型为 0，指针为 `nullptr` 等）。
    
	- **内存位置：** ==通常存储在程序的**数据段**或 **BSS 段**==。
    
- **潜在问题：**
    
    - **命名冲突：** ==多个文件可能定义同名的全局变量，导致链接错误==（除非使用 `static` 限制其链接性）。
        
    - **难以维护：** ==任何函数都可以修改全局变量，使得代码的逻辑难以追踪和调试==，增加了程序出错的风险。
        
    - **线程不安全：** 在多线程环境中，直接访问和修改全局变量需要额外的同步机制（如互斥锁），否则可能导致数据竞争。


### 2. 静态变量 (Static Variables)

“静态变量”这个术语在 C++ 中可以指代几种不同的情况，它们共同的特点是都具有**静态存储期**，但**作用域和链接性不同**：

#### a. 静态局部变量 (Static Local Variables)

- **定义：** ==在函数内部使用 `static` 关键字定义的变量==。
    
- **作用域：** **局部作用域**。它们只在定义它们的函数内部可见，函数外部无法直接访问。
    
- **链接性：** **无链接 (no linkage)**。它们是私有的，即使在同一个程序的其他文件中定义了同名的静态局部变量，它们也是完全独立的。
    
- **存储期：** **静态存储期**。==这意味着它们在程序启动时被创建，只被**初始化一次**==（第一次执行到定义它们的语句时，或者在程序启动时），并且在程序结束时才被销毁。==即使函数多次被调用，它们的值也会在函数调用之间保持不变。==
    
- **初始化：** 如果没有显式初始化，它们也会被**零初始化**。
    
- **内存位置：** 通常存储在程序的**数据段**或 **BSS 段**。

#### b. 静态全局变量 / 文件作用域静态变量 (File-Scope Static Variables)

- **定义：** ==在任何函数、类或代码块之外，但使用 `static` 关键字定义的变量。==
    
- **作用域：** **文件作用域**。它们在定义它们的文件（编译单元）的任何位置都可见。
    
- **链接性：** **内部链接 (internal linkage)**。这是 `static` 关键字用于全局变量时的关键作用。它使得该变量只在==**当前编译单元（文件）**中可见和可访问，不能被其他文件引用。==即使其他文件定义了同名的全局变量，它们也不会冲突，因为它们是独立的。
    
- **存储期：** **静态存储期**。
    
- **初始化：** 如果没有显式初始化，它们会被**零初始化**。
    
- **内存位置：** 通常存储在程序的**数据段**或 **BSS 段**。

#### c. 静态成员变量 (Static Member Variables)

- **定义：** 在类定义内部使用 `static` 关键字声明的成员变量。
    
- **作用域：** **类作用域**。它们可以通过类名（例如 `MyClass::static_member`）或类的对象访问。
    
- **链接性：** ==默认具有**外部链接**（除非用 `匿名的命名空间` 或 C++17 `inline` 关键字）。这意味着它们可以被程序的其他部分访问。==
    
- **存储期：** **静态存储期**。==它们不属于任何特定的对象实例，而是属于整个类。==类的所有对象共享同一个静态成员变量的副本。它们在程序启动时被创建，并且只被初始化一次。
    
- **初始化：** 通常需要在类定义之外进行一次定义和初始化（除了 `const static int/enum` 类型）。
    
- **内存位置：** 通常存储在程序的**数据段**或 **BSS 段**。