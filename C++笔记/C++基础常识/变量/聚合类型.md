### 什么是聚合类型 (Aggregate Type)？

在 C++11 及以后的标准中，一个类型要被称为“聚合类型”，需要满足以下所有条件：

1. **没有用户定义的构造函数：** ==不能有显式声明的构造函数（包括默认构造函数、拷贝构造函数、移动构造函数等）==。C++11/14 版本不允许，C++17 做了放宽，==允许用户自定义的**默认构造函数**==（但不能有其他用户定义的构造函数）。
    
2. **没有私有 (private) 或保护 (protected) 的非静态数据成员：** 所有非静态数据成员都必须是 `public` 的。
    
3. **没有虚函数 (virtual functions)：** 不能是多态基类。
    
4. **没有虚基类 (virtual base classes)：** 不能继承自虚基类。
    
5. **没有默认成员初始化器 (default member initializers) (C++11/14)：** 在 C++11 和 C++14 中，如果你为成员变量提供了像 `int x = 5;` 这样的默认初始值，它就不是聚合类型了。**但在 C++17 及更高版本中，这个限制被取消了。** 这是一个重要的放宽。
    

**总结一下 C++17 及其以后版本更宽松的聚合类型定义：** 一个类（或结构体）是聚合类型，如果它没有：

- 用户声明或用户定义的**构造函数**（除了允许的默认构造函数）。
    
- 私有或保护的**非静态数据成员**。
    
- **虚函数**。
    
- **虚基类**。