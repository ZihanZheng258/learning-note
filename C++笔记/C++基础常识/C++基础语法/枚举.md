C++的enum工具提供了另一种创建符号常量的方式，这种方式可以代替const。它还允许定义新类型，但必须按严格的限制进行。使用enum的句法与使用结构相似。例如，请看下面的语句：

![[Pasted image 20250428174346.png]]

让spectrum成为新类型的名称；spectrum被称为枚举（enumeration），就像struct变量被称为结构一样。

==将red、orange、yellow等作为符号常量，它们对应整数值0～7。这些常量叫作枚举量（enumerator）。==

在默认情况下，将整数值赋给枚举量，第一个枚举量的值为0，第二个枚举量的值为1，依次类推。可以通过显式地指定整数值来覆盖默认值，本章后面将介绍如何做

==对于枚举，只定义了赋值运算符。具体地说，没有为枚举定义算术运算：==
![[Pasted image 20250428174522.png]]


然而，有些实现并没有这种限制，这有可能导致违反类型限制。例如，如果band的值为ultraviolet（7），则++band（如果有效的话）将把band增加到8，而对于spectrum类型来说，8是无效的。另外，为获得最大限度的可移植性，应采纳较严格的限制。==枚举量是整型，可被提升为int类型，但int类型不能自动转换为枚举==

类型：
![[Pasted image 20250510181827.png]]

虽然在这个例子中，3对应的枚举量是green，但将3赋给band将导致类型错误。不过将green赋给band是可以的，因为它们都是spectrum类型。同样，有些实现方法没有这种限制。表达式3 + red中的加法并非为枚举量定义，但red被转换为int类型，因此结果的类型也是int。由于在这种情况下，枚举将被转换为int，因此可以在算术表达式中同时使用枚举和常规整数，尽管并没有为枚举本身定义算术运算。

![[Pasted image 20250510185906.png]]

非法的原因有些复杂。确实没有为枚举定义运算符+==，但用于算术表达式中时，枚举将被转换为整数，因此表达式orange+red将被转换为1+0==。这是一个合法的表达式，但其类型为int，不能将其赋给类型为spectrum的变量band。

如果int值是有效的，则可以通过强制类型转换，将它赋给枚举变量
![[Pasted image 20250510190034.png]]

如果试图对一个不适当的值进行强制类型转换，将出现什么情况呢？结果是不确定的，这意味着这样做不会出错，但不能依赖得到的结果：

## 设置枚举量的值
可以使用赋值运算符来显式地设置枚举量的值：

指定的值必须是整数。也可以只显式地定义其中一些枚举量的值：
![[Pasted image 20250510190135.png]]

这里，first在默认情况下为0。==后面没有被初始化的枚举量的值将比其前面的枚举量大1。因此，third的值为101。==
![[Pasted image 20250510190435.png]]

最后，可以创建多个值相同的枚举量：
![[Pasted image 20250510190512.png]]

其中，zero和null都为0，one和umero_uno都为1。在C++早期的版本中，只能将int值（或提升为int的值）赋给枚举量，但这种限制取消了，因此可以使用long甚至longlong类型的值。


## 枚举的取值范围
最初，对于枚举来说，只有声明中指出的那些值是有效的。然而，C++现在通过强制类型转换，增加了可赋给枚举变量的合法值。每个枚举都有取值范围（range），==通过强制类型转换，可以将取值范围中的任何整数值赋给枚举变量，即使这个值不是枚举值。==例如，假设bits和myflag的定义如下：

![[Pasted image 20250510190622.png]]

则下面的代码将是合法的：
![[Pasted image 20250510190636.png]]

其中6不是枚举值，但它位于枚举定义的取值范围内。取值范围的定义如下。==首先，要找出上限，需要知道枚举量的最大值。找到大于这个最大值的、最小的2的幂，将它减去1，得到的便是取值范围的上限。==例如，前面定义的bigstep的最大值枚举值是101。在2的幂中，比这个数大的最小值为128，因此取值范围的上限为127==。要计算下限，需要知道枚举量的最小值。如果它不小于0，则取值范围的下限==
==为0；==否则，采用与寻找上限方式相同的方式，但加上负号。例如，如果最小的枚举量为−6，而比它小的、最大的2的幂是−8（加上负号），因此下限为−7。选择用多少空间来存储枚举由编译器决定。对于取值范围较小的枚举，使用一个字节或更少的空间；而对于包含long类型值的枚举，则使用4个字节。

