在领域驱动设计（DDD）中，**实体（Entity）** 是领域模型中最基本且最重要的构建块之一。它代表了领域中一个具有**唯一标识**，并且其状态可以随时间变化的**概念**。

### 实体的核心特征

1. **唯一标识（Identity）**： 这是实体最重要的特征。一个实体拥有一个全局唯一的标识符（通常是一个 ID），即使它的所有属性值都发生了变化，只要 ID 不变，它仍然是同一个实体。
    
    - **示例**：你的身份证号码就是你的唯一标识。无论你换了工作、搬了家、改了发型，你仍然是你，因为你的身份证号码没变。在软件系统中，一个 `UserId`、`OrderId`、`ProductId` 都是这种标识。
    - **与值对象的对比**：回想一下我们之前讨论的**值对象**，它们没有唯一标识，其相等性由所有属性的值来决定。一旦值对象的任何属性发生变化，它就变成了“另一个”值对象。
2. **可变性（Mutability）**： 实体的状态（其属性值）可以随时间变化。实体的生命周期中，它会经历不同的状态，并执行不同的行为。
    
    - **示例**：一个 `Order` 实体可能从“待支付”变为“已支付”，再变为“已发货”。一个 `User` 实体可以修改其电子邮件地址或密码。
3. **生命周期（Lifecycle）**： 实体通常有明确的生命周期，从创建、状态变化到最终的销毁。它们在业务领域中是持续存在的。
    
4. **关注“是谁”或“是什么”（Focus on "Who" or "What"）**： 实体代表了领域中的一个具体个体，我们关心的是这个个体的持续存在和变化。

### 实体的例子

- **用户（User）**：在大多数系统中，用户都有一个唯一的 ID。即使用户的姓名、邮箱、密码都变了，他仍然是那个拥有特定 ID 的用户。
- **订单（Order）**：每个订单都有一个唯一的订单号。订单从创建到完成，其状态（已支付、已发货等）和内容（订单项）会不断变化，但它始终是那个订单。
- **产品（Product）**：在一个电商平台，即使某个产品的价格或描述发生变化，它仍然是那个拥有特定 SKU 或产品 ID 的产品。
- **账户（Account）**：银行账户有唯一的账号，余额会不断变化，但账号始终代表那个账户。

### 如何建模实体？

在代码中建模实体时，通常会遵循以下原则：

1. **包含唯一的标识符**：为实体定义一个唯一 ID 属性。
2. **封装行为**：实体的行为（方法）应该反映其在领域中的职责，并操作其自身的状态。这些行为是业务规则的体现。例如，`Order` 实体可能会有 `confirmPayment()`、`addItem()` 等方法。
3. **保护不变式**：实体内部的方法需要确保在执行后，该实体的**不变式**（我们之前讨论过的业务规则）仍然成立。
4. **贫血模型 vs. 充血模型**：在 DDD 中，我们倾向于**充血模型（Rich Domain Model）**，这意味着实体不仅仅是数据的容器（“贫血模型”），它还应该包含与这些数据相关的业务逻辑和行为。