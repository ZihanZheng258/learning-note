npm 的包安装分为本地安装（local）、全局安装（global）两种，从敲的命令行来看，差别只是有没有 -g 参数。

**本地安装：**将包安装到 node_modules 目录，并将信息保存到 package.json 的 dependencies 中。

> npm install express          # 本地安装

**全局安装：**用于安装命令行工具或需要在多个项目中使用的包。

> npm install express -g   # 全局安装

如果出现以下错误：

> npm err! Error: connect ECONNREFUSED 127.0.0.1:8087 

解决办法为：

> $ npm config set proxy null

### 本地安装

- **作用范围**：==默认情况下，npm 会将包安装在当前项目的 `node_modules` 文件夹中。这意味着每个使用该包的项目都会有自己的包副本==。
    
- **用途**：本地安装通常用于项目依赖。每个项目可以有自己的依赖版本，这有助于确保项目的稳定性和可复现性。
    
- **安装命令**：在项目目录中运行 `npm install <package-name>` 会将包安装在 `node_modules` 文件夹中，并在 `package.json` 文件中添加依赖项。
    
- **版本管理**：通过 `package.json` 和 `package-lock.json` 文件管理依赖的版本，确保项目在不同环境中的一致性。
    

### 全局安装

- **作用范围**：==全局安装会将包安装在系统级别的目录中，通常是 `/usr/local/bin`（在 Unix-like 系统上）或 `%AppData%\npm`（在 Windows 上）。==
    
- **用途**：全局安装用于那些不需要在每个项目中重复安装的工具或命令行实用程序。例如，安装一个全局的 `create-react-app` 可以用于创建新的 React 项目。
    
- **安装命令**：==使用 `-g` 标志来全局安装包，例如 `npm install -g <package-name>`。==
    
- **版本管理**：==全局安装的包版本由 npm 管理，但不会在项目的 `package.json` 中体现。==这意味着全局安装的包可能在不同项目之间共享，但也可能因为版本冲突而导致问题。

|特性|本地安装|全局安装|
|---|---|---|
|**安装范围**|仅在当前项目中可用|在系统的全局环境中可用|
|**命令使用**|`npm install package-name`|`npm install -g package-name`|
|**安装位置**|`node_modules` 目录|系统全局目录（依 OS 而异）|
|**使用场景**|项目依赖（库、框架）|CLI 工具、项目生成器|
|**访问方式**|通过 `require()` 或 `import` 使用|在命令行中直接使用|
|**依赖声明**|在 `package.json` 中记录|不在 `package.json` 中记录|
|**版本控制**|不同项目中可用不同版本|系统中只保留一个版本|
|**权限问题**|无需特殊权限|可能需要管理员权限|