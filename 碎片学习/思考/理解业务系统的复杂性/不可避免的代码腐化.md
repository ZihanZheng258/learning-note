除了业务本身的耦合带来的复杂性以外，「**代码腐化**」也是另一个让业务系统变得复杂的重要原因。

相信大部分开发都经历过这样的心历路程：

- 项目刚开始时雄心勃勃：维护前人的屎山是我的无奈，从零开始，我要让你看看什么才是整洁架构的时代！
    
- 开发过程中：时间都是倒排，CR 别人的代码就是5秒后在企微回复一个 d。需求改来改去，业务逻辑扭扭曲曲，辛苦写好的单测又失效了，算了不装了，为什么跟自己过不去呢
    
- 后期：呐，搞出屎山大家都不想的咯，这次不算下次一定，我煮碗面给你吃？

我自己就是一个很典型的例子。

大学毕业刚工作时，负责维护了一个非常恶心的项目，没有任何文档，一个 PHP 文件几万行，一个函数上千行，一个接口能返回好几种完全不同的 JSON 作为 response。

每天还有好几十号人在疯狂 push 代码，仓库不断膨胀，每次修改个功能心中都是千万只羊驼飞过，一不小心就搞出个线上事故，至今对 PHP 等没有类型的语言开发的项目还心有余悸

后来有个机会从零开始负责一个公司重量级的运营系统的开发，内心非常的激动，终于可以按照自己工作之余看书学到的最佳实践来构建项目了，我要让所有人刮目相看。

开发过程中，我自己也是恪尽职守，每天晚饭后都花至少 1 个小时拉着团队另外几个同事做 Code Review，经常还争执得面红耳赤，对 Bad Taste 坚决抵制。

项目整体推进得很顺利的，上线后取得了很大的成功，只是后来由于架构变动，我去了另一个团队，不再负责那个项目了。不过我一直觉得，我给接盘方打下了一个非常好的基础，他们肯定会感谢我……

直到一年后的某天，和一个同事无意间聊起来，他们就负责了我之前那个项目（他不知道我之前负责那个项目）。本以为能从他那得到些正向的评价，结果却全是吐槽，诸如代码看不懂、风格奇葩、扩展困难等等。最后补了一句，后来实在受不了，他们重写了...

这就是发生在我身上真实的故事，一个满腔热血，熟读《整洁架构》《重构》《设计模式》《领域驱动》 《演进式架构》的人，从零开始，依然避免不了代码走向腐化，成了后人口中的屎山始作俑者。

至于到底代码是如何腐化的，这是一个非常大的话题，这里我就不展开了，因为上述提到的书中几乎都是讲这些 Bad Taste 和相应的应对之道的，我也没有能力和自信能比它们讲得更清楚。

因此，本文中我只想讲讲为什么我觉得**这种腐化是不可避免的**。

核心原因，我认为是**架构设计和模块抽象只能面向当下，它天然是短视的**，或者说是有局限性的，这种局限性即使是最优秀的架构师也是不可逾越的。