结合过去参与过的很多业务系统的经验以及近期看书的一些思考，==抛开人的原因（假设人都是理智的有追求的）==，我认为导致业务系统复杂的根本原因有两个：

- 功能之间隐秘增加的耦合
    
- 不可避免的代码腐化
    
## 功能之间隐蔽增加的耦合

我相信绝大部分开发在项目一开始的时候，都有一颗「**整洁架构**」的心，都希望把代码写好。

尤其是项目一开始，需求做的飞快，每天几千行代码也不在话下。他会关注函数的颗粒度，==会关注模块的划分和职责单一，也会关注单元测试和代码的可测性。==

但即使这样，随着时间推移，他也会发现代码改起来越来越痛苦，总有牵一发而动全身，或者明明是修改功能 A，却不得不关注功能 B 是否受影响。为啥呢？

答案就是——**耦合**。很多人一说到耦合，就会面露厌恶。

确实，==很多时候不合理的耦合是万恶之源。但是耦合又是不可避免的，因为 Essential Complexity 的存在。==

如果某个功能本来就需要多个模块共同参与，不论你怎么分解这些模块，只有把他们「集成」到一起，才能实现有意义的功能。

把它们集成到一起，A 依赖于 B，B 又依赖 C，C 又会反馈给A，这不就是耦合吗？软件工程中有句话每个人都烂熟于心：

> 高内聚，低耦合

但很多人只记住了后面三个字「**低耦合**」，却忘记了前面的三个字「**高内聚**」。

在高内聚的边界之内，==各个模块之间是不是就是强耦合的呢？即使你认真的去进行架构设计和模块拆分，这种耦合也是难以避免的，我可以举一些例子来看看。==

某团队开发了一个社区类应用，社区应用大家应该也用过不少，大体架构是差不多的，一般都会包含如下一些业务模块：

- 资讯：可以简单理解为feeds流，主要以左文右图的方式来展示
    
- 社区：用户开放交流的地方，可以类比于新浪微博或者twitter，用户可以发带图片的内容
    
- 评论区：资讯、动态都可以发评论
    
- ...
    

上述这几个模块都是比较独立的业务，产品形态也有差异，因此一般都会由不同的小 Team 来负责。

有一天，产品经理希望做一个新功能，叫「名片系统」。简单来说就是，它允许用户自定义自己头像后面还可以展示哪些名片或者标签（可以有多个），以突显身份特征，比如：
