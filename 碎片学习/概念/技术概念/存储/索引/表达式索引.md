### 什么是表达式索引？

**表达式索引**（Expression Index）是一种特殊的数据库索引，它不是直接建立在表的某个列上，==而是建立在由一个或多个列组成的**表达式**或**函数**的计算结果上。==

==你可以把它看作是一个**预先计算好的、可用于快速查找的虚拟列**==。数据库在创建索引时，会把这个表达式的结果计算出来，并将其存储在索引中。当你查询时，如果查询条件中的表达式与索引表达式完全匹配，数据库就可以直接利用这个索引，而无需扫描整张表

### 为什么需要表达式索引？

在传统的索引中，==你只能对列本身进行索引。但如果你的查询条件经常使用函数或复杂的表达式，传统的索引就无法被利用==。

例如，你有一个用户表 `users`，其中有 `first_name` 和 `last_name` 两列。你经常进行以下查询：

```sql
SELECT * FROM users WHERE lower(first_name) = 'john';
```

这里的 `lower()` 函数是一个表达式。由于索引是建立在原始的 `first_name` 列上，==数据库无法直接使用索引来查找小写的 `'john'`。它不得不对**每一行**数据都执行== `lower(first_name)`，然后再进行比较，这会大大降低查询效率。

而表达式索引就是为了解决这个问题。