

### CGI（通用网关接口）和FastCGI是什么？

在网站开发中，**CGI**（Common Gateway Interface）是一种标准协议，==用于让Web服务器（比如Nginx、Apache）与外部应用程序（比如用PHP、Python或Perl写的脚本）进行通信。==

可以这样理解它的工作方式：

1. 用户在浏览器请求一个网页。
    
2. Web服务器收到请求，发现这是一个CGI脚本。
    
3. ==**Web服务器会为这个请求创建一个全新的进程**来运行这个脚本。==
    
4. 脚本运行，生成HTML或其他内容。
    
5. Web服务器将这些内容返回给用户。
    
6. ==**脚本运行结束，该进程被销毁。**==
    

这种“每次请求都创建和销毁新进程”的模式非常简单，但效率很低。在高并发的情况下，频繁地创建和销毁进程会消耗大量的系统资源，导致服务器响应变慢。


### **FastCGI** 就是为了解决这个问题而诞生的。

**FastCGI**（Fast Common Gateway Interface）==是CGI的“快速”版本。它是一种改进的协议，核心思想是**让应用程序进程持续运行**==，而不是每次请求都重新创建。

**FastCGI的工作原理：**

1. Web服务器启动时，==**FastCGI进程管理器会预先启动几个甚至多个应用程序进程**==（比如几个PHP进程），这些进程会一直保持运行，等待处理请求。
    
2. 当用户请求到来时，Web服务器会将请求通过一个**持久的连接**（通常是Socket）发送给一个空闲的FastCGI进程。
    
3. 该进程处理完请求后，并**不会被销毁**，而是继续等待下一个请求。
    
4. 这样，所有后续请求都可以直接由这些“常驻内存”的进程来处理，省去了创建和销毁进程的巨大开销。
    

### 核心区别总结

|特性|**CGI**（通用网关接口）|**FastCGI**（快速通用网关接口）|
|---|---|---|
|**工作模式**|**每次请求**都创建新进程，请求结束后销毁。|**预先启动**多个进程，这些进程持续运行并处理多个请求。|
|**性能**|效率低下，在高负载下性能急剧下降。|性能显著提高，在高负载下也能保持稳定。|
|**资源消耗**|每次请求都需要消耗CPU和内存来创建进程。|进程常驻内存，减少了资源开销。|

导出到 Google 表格

简单来说，如果把CGI比作**打车服务**，每次叫车都要等司机从家里出发，送到地方后司机就下班回家了。而FastCGI则像一个**车队**，司机们一直在站里等着，随时可以接单，效率高得多。