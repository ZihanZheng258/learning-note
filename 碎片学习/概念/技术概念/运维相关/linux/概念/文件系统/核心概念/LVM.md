Linux **LVM (Logical Volume Manager)** ==是一种在 Linux 系统中对硬盘分区进行管理的技术。==它提供了一种比传统分区方式更灵活、更强大的磁盘管理方法。==简单来说，LVM 允许你将多个物理硬盘或分区组合成一个或多个逻辑卷，这些逻辑卷可以像普通分区一样被格式化和使用==，但它们具有动态调整大小、创建快照等高级功能。

### LVM 的核心概念

要理解 LVM，你需要掌握几个关键概念：

- **物理卷 (Physical Volume, PV)**：
    
    - ==**PV** 是 LVM 的最底层单元。它可以是整个硬盘、硬盘上的一个分区，甚至是 RAID 阵列==。
        
    - 在将它们用于 LVM 之前，你需要使用 `pvcreate` 命令将它们初始化为 LVM 的物理卷。
        
    - PV 上的空间被划分为==**物理扩展单元 (Physical Extent, PE)**==，这是 LVM 内部数据存储的最小单元，通常默认为 4MB。
        
- **卷组 (Volume Group, VG)**：
    
    - **VG** 是一个或多个 **PV** 的集合。==你可以把它想象成一个由多个物理硬盘组成的“大池子==”。
        
    - 所有添加到同一个 VG 中的 PV 的空间都会被 LVM 统一管理。
        
    - 你可以使用 `vgcreate` 命令创建卷组。
        
- **逻辑卷 (Logical Volume, LV)**：
    
    - **LV** 是从 **VG** 中分配出来的、可以像普通分区一样使用的存储单元。
        
    - **LV** 是用户可以直接使用的部分，你==可以在上面创建文件系统 (如 ext4, XFS) 并挂载它们。==
        
    - ==**LV** 的空间被划分为**逻辑扩展单元 (Logical Extent, LE)**==，通常一个 LE 对应一个 PE。
        
    - 你可以使用 `lvcreate` 命令创建逻辑卷。


### LVM 的优势

与传统的磁盘分区相比，LVM 提供了显著的优势：

1. **弹性调整大小**：
    
    - **在线扩展**：==你可以在不停机的情况下，动态地增加逻辑卷的大小。==例如，当你的某个文件系统空间不足时，可以快速扩展它。
        
    - **在线缩小**：==虽然不如扩展常用，但在某些文件系统支持的情况下==，你也可以缩小逻辑卷的大小。
        
2. **存储池化**：
    
    - LVM ==将多个物理设备抽象为一个大的存储池 (VG)，这样你就不必关心底层物理存储的具体位置，只需要从 VG 中分配逻辑卷即可==。
        
    - 这使得管理多个硬盘变得更加简单和高效。
        
3. **快照 (Snapshots)**：
    
    - LVM 允许你创建逻辑卷的**快照**。快照是某个时间点逻辑卷的只读副本。
        
    - 这对于数据备份、==测试新软件或回滚到之前的状态非常有用，而不会影响原始数据。==
        
4. **数据迁移**：
    
    - 你可以在不停机的情况下，将数据从一个物理卷迁移到另一个物理卷，这对于更换故障硬盘或升级存储非常方便。
        
5. **条带化 (Striping)**：
    
    - LVM 可以创建条带化的逻辑卷，==将数据分布到多个物理卷上，从而提高读写性能 (类似于 RAID 0)。==

到底他是怎么写入硬盘当中的？ 呵呵！好问题～其实，依据写入机制的不同，而有两种方式：

线性模式 （linear）：假如我将 /dev/vda1, /dev/vdb1 这两个 partition 加入到 VG 当中，并且整个 VG 只有一个 LV 时，那么所谓的线性模式就是：当 /dev/vda1 的容量用完之后，/dev/vdb1 的硬盘才会被使用到， 这也是我们所建议的模式。

交错模式 （triped）：那什么是交错模式？很简单啊，就是我将一笔数据拆成两部分，分别写入/dev/vda1 与 /dev/vdb1 的意思，感觉上有点像 RAID 0 啦！如此一来，一份数据用两颗硬盘来写入，理论上，读写的性能会比较好。