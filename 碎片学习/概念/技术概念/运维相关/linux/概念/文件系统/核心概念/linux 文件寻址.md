### 1. 从路径到 Inode 的查找

当你向 Linux 系统提供一个文件路径（例如 `/home/user/documents/report.txt`），系统会执行以下操作来找到对应的 **inode 号码**：

1. **从根目录开始：** 系统从文件系统的根目录 `/` 开始。根目录本身也有一个固定的 inode 号码（通常是 2）。
2. **逐级解析目录：**
    - **读取目录项：** 系统会读取当前目录（例如 `/` 目录）的数据块。==目录的数据块中存储着一系列的**目录项 (directory entries)**。每个目录项包含一个**文件名**和该文件名对应的**inode 号码**==。
    - **查找子目录的 Inode：** 在 `/` 目录的数据块中，系统会查找名为 `home` 的目录项，并获取到 `home` 目录的 inode 号码。
    - **进入下一级目录：** 接着，系统会使用 `home` 目录的 inode 号码，找到其对应的 inode 结构，然后从这个 inode 中获取 `home` 目录的数据块地址，并读取其内容。
    - **重复查找：** ==这个过程会不断重复：在 `home` 目录中找到 `user` 的 inode 号码，然后进入 `user` 目录；在 `user` 目录中找到 `documents` 的 inode 号码，然后进入 `documents` 目录==。
3. **最终找到文件 Inode：** 最后，当系统读取 `documents` 目录的数据块时，它会查找名为 `report.txt` 的目录项，并从中获取到 `report.txt` 文件对应的 **inode 号码**。

到这里，第一阶段完成：系统已经成功地根据文件路径找到了文件的 **inode 号码**。

一旦系统获得了文件的 inode 号码，它就会执行以下操作来访问实际的文件数据：

1. **查找 Inode 结构：** 系统会使用这个 inode 号码作为索引，在文件系统存储的 **inode 表（或 inode 区域）**中，定位到对应的 **inode 结构**。
2. **获取元数据：** 从这个 inode 结构中，系统可以立即获取到文件的所有**元数据**，包括文件类型（普通文件、目录、符号链接等）、文件大小、权限、所有者、创建/修改时间等。
3. **获取数据块地址：** 最关键的是，inode 结构中包含了一系列**指针 (pointers)**，这些指针指向了磁盘上实际存储文件内容的**数据块 (data blocks)**。
    - **直接指针：** ==对于小文件，inode 中会直接包含指向几个数据块的指针==。
    - **间接指针：** 对于大文件，文件内容可能分散在许多数据块中。inode 会使用**间接指针**：
        - **一级间接指针：** 指向一个数据块，而这个数据块中存储的不是文件内容，而是更多的数据块地址。
        - **二级间接指针：** 指向一个数据块，这个数据块存储的是一级间接数据块的地址。
        - **三级间接指针：** 指向一个数据块，这个数据块存储的是二级间接数据块的地址。 通过这种多级间接寻址，文件系统可以高效地管理非常大的文件，而无需为每个文件的 inode 分配过多的空间来存储所有数据块的地址。
4. **读取/写入数据：** 拿到数据块的地址后，文件系统就可以向磁盘发送请求，从这些数据块中读取文件内容到内存，或者将内存中的数据写入到这些数据块中。

