
您提到的 **Kanda 光流法**，通常指的应该是计算机视觉领域中著名的 **Kanade–Lucas–Tomasi (KLT) 特征追踪器**。

KLT 是一种高效的、==**稀疏（Sparse）**的光流算法，主要用于**跟踪视频序列中特定的兴趣点或特征点**==（而不是像稠密光流那样计算每个像素的运动）。

## 什么是 KLT (Kanade–Lucas–Tomasi) 算法？

KLT 算法基于 Lucas-Kanade 方法，并由 Tomasi 和 Kanade 进行了改进==，增加了对可跟踪特征的选择标准。==

### 1. 核心目标：跟踪特征点

它的目标是：给定一个图像中的一个小块（**Patch**）或特征点，计算它在下一帧图像中的新位置，假设其在两帧之间只发生了**微小的平移**。

### 2. 基本假设

KLT 算法建立在光流法的两个基本假设之上：

1. **亮度恒定假设（Brightness Constancy）:** 图像中被跟踪的特征点的局部区域，==在两帧之间其像素的亮度值保持不变。==
    
    
    其中 I 是图像亮度，(x,y) 是像素位置，t 是时间。
    
2. **空间一致性假设（Spatial Coherence）:** 局部区域内所有像素点的运动向量（光流）是相同的。
    

### 3. 如何解决“孔径问题”（Aperture Problem）

单一像素点的光流计算会遇到著名的“孔径问题”（例如：无法判断一条直线是向左平移还是沿着自身方向滑动）。

KLT 通过**局部区域**（即一个小的窗口或 Patch）来解决这个问题。它寻找一个位移向量 (δx,δy)，使得原图像中的窗口 W1​ 与新图像中的窗口 W2​ 之间的**误差（通常是平方差和 SSD）最小**：

通过使用 **泰勒级数展开** 和 **最小二乘法**，这个问题最终被转化为求解一个线性方程组，其核心是一个 **2x2 的矩阵 G**，即图像梯度的协方差矩阵（或称为结构张量）。

### 4. Tomasi 的改进：特征点选择

KLT 最关键的改进在于它增加了一个步骤：**只选择那些“好的特征”进行跟踪。**

- **好的特征点**：是指那些在局部区域内具有足够**纹理变化**的区域，例如**角点（Corners）**。这些区域能提供足够的梯度信息，使得上述线性方程组有稳定的解。
    
- **判定标准：** Tomasi 和 Kanade 提出，一个区域适合跟踪，当且仅当其结构张量 G 的**两个特征值 (λ1​,λ2​) 都大于某个预设的阈值**。
    
    - 如果 λ1​ 和 λ2​ 都很大，说明该区域在两个方向上都有强的梯度变化（**角点**）。
        
    - 如果 λ1​ 大、λ2​ 小，说明只有在一个方向有强的梯度变化（**边/边缘**，容易产生孔径问题）。
        
    - 如果 λ1​ 和 λ2​ 都很小，说明区域是平坦的（**平坦区域**，无法跟踪）。
        

---

## KLT 的应用优势

- **高效且快速：** KLT 只跟踪选定的少数特征点，==避免了计算图像中所有像素的光流（即**稀疏光流**），因此计算速度非常快。==
    
- **鲁棒性：** 通过只选择质量高的特征点，提高了跟踪的准确性和鲁棒性。
    
- **多尺度应用：** KLT 经常结合**图像金字塔（Pyramidal Implementation）**使用，以处理帧间较大的位移。在较低分辨率上找到一个大致的位移，然后在高分辨率上进行精确校正。
    

KLT 算法在实时应用中非常流行，常用于：**目标跟踪、视频稳定、相机运动估计**和 **视觉里程计 (Visual Odometry)** 等。