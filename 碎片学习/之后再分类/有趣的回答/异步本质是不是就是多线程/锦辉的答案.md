既然不少大佬都发文说明了这个问题的know what和know how，那么我简单写点know why吧！

首先就和 DBinary 佬说的一样，异步不像线程和进程这两个写在标准操作系统教科书上的术语一样，有明确的定义。因为传统计算机的教材一般就管到线程这个粒度的基础设施了，再往上的任意概念和基础设施都属于工程的范畴。也就是说，异步这个概念的实现对于操作系统是无感的，只要你的操作系统实现了基本的进程调度和拉线程的操作，异步就和汉诺塔一样，都是在这些基础设施之上可被实现的“上层应用”。

叠甲：我回答中说的异步指的是js和py中的async和await关键字代表的一种解释器运行时，别的“异步”的概念不在我的谈论范围内。

异步的基本认知
首先论证这个问题很简单的，你只要看看js和py这两个脚本语言就行了。无论是v8还是nodejs，我们都知道js是单线程语言，但是 js 却可以疯狂开启好几个异步的调度函数，写过web的朋友都知道，处理用户函数和进行dom渲染在web总是体感上同时进行的操作。事实上，执行这些操作的调度运行时却是单线程。所以诸位对于异步需要先有一个非常基本的感性认识：异步是一项可以在单个线程内「看似并行」地执行某些操作的运行时机制。

我们先来看一段简单的爬取图片的代码，这段代码通过 TS 的异步函数实现

我们都知道执行 typescript 的 nodejs 是单线程的，但是我们却在一个单线程中实现了一个近似并行的图片下载。你并不需要知道最底层的原理，你只需要知道，这，就是异步执行。

不同于传统的同步执行函数，运行时在执行异步函数时不会立刻“堵”在那里，等待结果返回，而是会一口气一直往后运行，直到下一个同步函数。

为什么需要异步？
想要解释为什么我们会在工程实践中使用异步构建很多的应用程序的入口函数，就必须先解释一个操作系统或者高性能计算机中非常常见的知识点：计算机资源调度器可以分为两类——CPU的调度和IO的调度

![[Pasted image 20250926100333.png]]

CPU 的调度很好理解，如上图的 DISPATCHER 所示，一个 DISPATCHER 对应一个 CPU 的调度，比如执行 1 + 1 = 2，或者是帮你解码一段数据流到 utf-8 文本，这些都需要 CPU 的参与；而 IO 调度则指和文件读写，网络传输等相关的操作：你在批判性地鉴赏本地保存的学习资料、你和网友用表情包激情对线，你把昨天做完的课设作业 email 给倒霉的助教，这些操作本质上都是在消耗 IO 调度。

当然，你可能会反驳说读取图像涉及到的编解码会用到一点点 CPU，这个很复杂了，因为部分手机、苹果家的产品等等，都会把常见多媒体的编解码直接走专门的 asic，而不走 CPU，所以现代手机和PC中，常见多媒体的查看可以看作几乎只有IO，别和我杠，杠就是你对。

从上面的图中你应该也能看出，对一段程序而言，如果可以做到让 IO 和 DISPATCHER 同时执行调度，那么运作效率肯定会提升很多。因为随着云原生等技术的兴起，现代工业化的服务器系统中大部分的操作已经从过去以CPU性能不够为瓶颈慢慢变成了IO不够为瓶颈了，CPU性能提升在过去几十年遵循摩尔定律，但是IO可不是，随着时间的推移，在大约2017年左右，大部分最新设备的IO已经快要跟不上CPU了，这也被我们称为内存墙问题，很多时候你打黑神话悟空觉得很卡，可能不是因为CPU太垃圾，可能是因为你的内存条IO不行。其实现在的深度学习 AI 也是，内存墙问题在部署和训练大模型时是我们做 AI Infra 的人非常需要着重解决的性能问题之一，甚至快成为最主要的问题了。

说回异步，事实上，在我们刚才的例子中，下载图像这件事，你也能看到，一部分调度在我们程序代表的 CPU 调度上，另一部分则是下载图片时的网络请求。我们写爬虫肯定是希望下载地越快越好，而让多个下载图片的函数同时执行，显然可以让下载速度更快。在过去的这篇文章中，我通过 python 的多线程完成了这件事
  

但是，我们都知道一个线程对应一个 CPU 核心的调度权，那么你如果同时开启了10个线程下载图片，就有 10 个CPU核心会被调度，但是图片下载的主要时间开销都在网络IO上，其实没必要开那么多线程。

所以针对这类IO开销是系统主要瓶颈的场景，异步就是一个很好的解决方案，实现异步的进程程序大部分都是单线程的，所以你无论 overlap 多少的 IO 函数，最终被调度的往往也只有一个CPU核心，这样做可以保证当然的这个进程不会消耗太多系统资源。

所以用一句话总结，我们为什么需要异步，那就是：因为随着互联网的发展，越来越多的场景 IO 成为主要瓶颈，而我们希望可以用一个线程就足以调度若干个IO函数，实现它的方案就是异步。

## 为什么异步写法会慢慢流行？

随着互联网技术的发展，虚拟化，服务发现系统再到现在的云原生，听着，我知道，这些在你们的教科书上都不存在，但是这些技术现在已经慢慢成为了互联网内和操作系统一样，从「新技术」变成了「很基本的知识点」，你应该去主动了解才行。

「这些技术的演进」+「硬件成本的下降」对目前大型系统的架构设计造成了非常深远的影响，在过去，我们往往会一把梭，写一个非常巨大的项目，比如用 java 写的某团后端的商品管理和交易系统，这套系统光是全量编译一次可能就需要20分钟的时间，随着项目越来越大，在团队合作和系统维护各个方面会开始出现越来越多的问题。而现在，不少的服务会开始考虑将一些重磅服务模块做成一个又一个“节点”，而非是嵌合在一个庞大项目内的文件夹，这么做可以充分利用目前云原生的基础设施，遇到性能问题不再寻求掉头发解决，而是直接横向扩容，别忘了，现在的硬件成本和10年前相比可是下降了很多，未来还会继续下降。

因此，目前一套系统中，因为节点数量增加了，内部的网络请求数量就增加了，对于一个 endpoint 来说，原本一个图像处理服务是它开一个 worker 线程处理的，现在变成了请求内网服务发现节点的 API，看到了吧？CPU 调度慢慢变成了IO调度，而一套 endpoint 中需要同一时间发起的 API 请求可能成百上千个，你每一个请求都单开一个线程，性能受到的影响不会小的。因此，在云原生大行其道的如今，异步是进行大规模API管理和请求的一个很好用的技术，所以它会越来越流行。

**物质基础决定上层建筑，硬件成本的变化会深刻影响上层的软件开发方法论，你们都需要记住这句话。**