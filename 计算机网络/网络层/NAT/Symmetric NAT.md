Symmetric NAT（对称型 NAT）是一种**最严格、最不友好**的网络地址转换（NAT）类型。==它的核心特点是：它不仅限制了可以通信的**外部地址**，还对**端口**进行了严格限制。==

你可以把 Symmetric NAT 想象成一个**“只认特定来信地址和特定信封”的大门**。

- **你（内部设备）**：你从屋子里发出一封信给一个朋友 A（外部主机 A）。
    
- **路由器（Symmetric NAT）**：你的前门。
    
- **Symmetric NAT 的规则**：==你的前门会给每一封你发出的信件分配一个**新的、唯一的公网地址和端口**==，而且只允许来自那个特定朋友（外部主机 A）的回复通过这个地址返回给你。
    

### 工作原理

当你的电脑（私有地址：`192.168.1.10:5000`）第一次向外部服务器 A（公网地址：`1.2.3.4:80`）发送数据包时：

1. Symmetric NAT 路由器会为这次通信创建**一个唯一的公网映射**，比如 `203.0.113.10:60000`。
    
2. 它会将数据包的源地址改为这个映射地址，并发送出去。
    
3. 最关键的一步是：==这个映射**只对外部服务器 A 的特定地址（`1.2.3.4:80`）有效**。==
    

现在，如果你想向另一个外部服务器 B（公网地址：`5.6.7.8:90`）发送数据，路由器会**再次创建一个新的映射**，比如 `203.0.113.10:60001`。

### 核心特性：多重限制

Symmetric NAT 的关键特性是：

- **地址限制**：它只允许来自你主动通信的那个外部地址的数据包返回。
    
- **端口限制**：它为**每个新的目标地址**分配**一个新的源端口**。这意味着即使是同一个内部设备，==向两个不同的外部设备通信，也会使用两个不同的公网端口==。
    
- **优点**：安全性最高。它几乎完全阻止了来自外部的非请求连接，提供了强大的保护。
    
- **缺点**：对**点对点（P2P）通信**造成了巨大的障碍。由于每个连接都使用不同的端口，STUN 协议几乎无法在这种 NAT 类型下工作。