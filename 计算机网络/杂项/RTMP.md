
RTMP 的全称是 **Real-Time Messaging Protocol**，中文是**实时消息传输协议**。它是由 Adobe 公司开发的一种协议，主要用于在互联网上传输**音视频和数据**。

简单来说，RTMP 就像是互联网上的一个**“高速公路”**，专门用来实时传输音视频流，是早期直播行业的标准技术。

### 核心特点

1. **基于 TCP**：RTMP 基于 TCP（传输控制协议），==这保证了数据传输的可靠性。即使网络环境不稳定，数据包也不会丢失。==
    
2. **流式传输**：RTMP 是一种流式协议，它允许音视频数据以连续的流形式传输，而不是将整个文件下载下来。这使得实时播放成为可能。
    
3. **多路复用**：==在一个 RTMP 连接中，音视频和数据可以同时传输，互不影响。==
    
4. **分块**：RTMP 将数据分割成多个较小的块，以便在传输过程中更灵活、更高效地管理。
    

### RTMP 的工作流程

一个典型的 RTMP 直播工作流程是这样的：

1. **推流（Push）**：直播工具（如 OBS Studio）将摄像头和麦克风采集的音视频数据，通过 RTMP 协议**推流**到直播服务器。
    
2. **服务器处理**：直播服务器接收到数据流后，可以进行转码、录制、分发等操作。
    
3. **拉流（Pull）**：观众通过播放器（如网页播放器、手机应用）向直播服务器发送请求，**拉取**音视频流进行观看。
    

### 为什么 RTMP 曾经是王者？

在 Flash 时代，RTMP 是实时流媒体传输的绝对霸主。它的低延迟、稳定性和广泛的播放器支持，使其成为视频直播的首选协议。几乎所有的直播平台（Twitch、YouTube Live 等）都曾依赖 RTMP 作为推流协议。

### RTMP 的现状与挑战

尽管 RTMP 仍然被广泛使用，但它面临着一些挑战：

- **不支持 HTML5**：RTMP 需要 Flash Player 才能在浏览器中播放，而 Flash Player 已经停止支持。
    
- **不友好于移动端**：RTMP 在移动端的播放支持不佳，因为大多数移动浏览器原生不支持它。
    
- **防火墙问题**：RTMP 默认使用 1935 端口，可能会被某些防火墙或网络配置阻止。
    

为了应对这些挑战，RTMP 在**推流端**仍然非常流行，但在**播放端**则被其他协议取代，例如：

- **HLS（HTTP Live Streaming）**：苹果公司开发的协议，广泛用于移动端和网页播放。它将视频切分成小的 .ts 文件，通过 HTTP 协议传输。
    
- **DASH（Dynamic Adaptive Streaming over HTTP）**：MPEG 组织开发的国际标准，功能类似于 HLS。
    
- **WebRTC**：用于超低延迟的音视频传输，但技术更为复杂，主要用于视频会议等场景。